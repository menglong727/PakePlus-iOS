{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"shengtian","url":"https://wap.dsziben.com","showName":"鼎盛","appid":"com.dingsheng.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":true,"version":"5.1.5","preview":"Android","platform":["1-1","1-2","2-1","2-2"],"width":412,"height":915,"desc":"","jsFile":[],"filterCss":"","customJs":"// ========== 🔖 标识输出 ==========\nconsole.log(\n    '%cBuild from PakePlus: https://github.com/Sjj1024/PakePlus',\n    'color:orangered; font-weight:bold; background:#fff3f3; padding:2px 6px; border-radius:4px; font-size:12px;'\n);\n\n// ========== ⚙️ 配置项（可自定义） ==========\nconst PakePlus = {\n    // 是否启用调试日志\n    debug: true,\n\n    // 允许放行的外链域名（不拦截这些链接）\n    externalWhitelist: [\n        'baidu.com',\n        'google.com',\n        'github.com'\n        // 添加你需要的域名\n    ],\n\n    // 是否清理分类页的 hash（防止自动跳转）\n    cleanHashOnCategory: true,\n\n    // 分类页路径关键词\n    categoryPaths: ['/category', '/games', '/list', '/tag']\n};\n\n// ========== 🛠️ 工具函数 ==========\nfunction log(...args) {\n    if (PakePlus.debug) console.log('[PakePlus]', ...args);\n}\n\nfunction isExternal(url) {\n    try {\n        return new URL(url, window.location.origin).origin !== window.location.origin;\n    } catch (e) {\n        return true;\n    }\n}\n\nfunction isWhitelisted(url) {\n    return PakePlus.externalWhitelist.some(host => url.includes(host));\n}\n\nfunction isInCategoryPage() {\n    return PakePlus.categoryPaths.some(path => window.location.pathname.startsWith(path));\n}\n\nfunction cleanupUrlHash() {\n    if (PakePlus.cleanHashOnCategory && isInCategoryPage() && window.location.hash) {\n        const cleanUrl = window.location.pathname + window.location.search;\n        log('Cleaning URL hash to prevent auto-redirect:', window.location.hash);\n        history.replaceState(null, '', cleanUrl);\n    }\n}\n\n// ========== ✅ 优化版点击拦截 ==========\nconst hookClick = (e) => {\n    const anchor = e.target.closest('a');\n    if (!anchor || !anchor.href) return;\n\n    const href = anchor.href;\n    const target = anchor.target;\n\n    // 判断是否受 <base target=\"_blank\"> 影响\n    const baseTargetBlank = document.querySelector('head base[target=\"_blank\"]');\n\n    // 是否需要拦截：target=\"_blank\" 或受 base 影响\n    const shouldIntercept = \n        target === '_blank' || \n        (baseTargetBlank && !['', '_self', '_parent', '_top'].includes(target));\n\n    if (!shouldIntercept) {\n        log('Not intercepting (not _blank):', href, 'target:', target);\n        return;\n    }\n\n    // 白名单放行（外链白名单）\n    if (isWhitelisted(href)) {\n        log('Whitelisted link, allowing native behavior:', href);\n        return;\n    }\n\n    // 阻止默认行为\n    e.preventDefault();\n    log('Intercepted and redirecting:', href);\n\n    // ✅ 使用 replace 而不是 href，避免污染 history\n    window.location.replace(href);\n};\n\n// ========== ✅ 修复 window.open ==========\nconst originalOpen = window.open;\n\nwindow.open = function (url, target = '_blank', features) {\n    log('window.open called:', { url, target, features });\n\n    // 如果是允许的行为（如 _self），放行\n    if (!['_blank', ''].includes(target)) {\n        return originalOpen.call(this, url, target, features);\n    }\n\n    // 白名单放行\n    if (isWhitelisted(url)) {\n        log('Whitelisted window.open:', url);\n        return originalOpen.call(this, url, target, features);\n    }\n\n    // 否则拦截：当前页跳转\n    log('Intercepted window.open -> redirecting:', url);\n    window.location.replace(url);\n};\n\n// ========== 📣 注册事件 ==========\ndocument.addEventListener('click', hookClick, { capture: true });\n\n// ========== 🧹 初始化：清理 URL（关键修复！）==========\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', cleanupUrlHash);\n} else {\n    cleanupUrlHash();\n}\n\n// 可选：监听页面可见性变化，防止“恢复”逻辑\ndocument.addEventListener('visibilitychange', () => {\n    if (!document.hidden && isInCategoryPage()) {\n        log('Page visible in category, consider preventing auto-continue...');\n        // localStorage.removeItem('lastPlayedGame'); // 如需可取消注释\n    }\n});\n\n// ========== 💡 调试提示 ==========\nlog('Hook system initialized. Config:', PakePlus);","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"shengtian","title":"鼎盛","url":"https://wap.dsziben.com","userAgent":"Mozilla/5.0 (Linux; Android 14; Pixel 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36","width":412,"height":915,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"shengtian","showName":"鼎盛","version":"5.1.5","webUrl":"https://wap.dsziben.com","id":"com.dingsheng.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"android":{"name":"shengtian","showName":"鼎盛","version":"5.1.5","webUrl":"https://wap.dsziben.com","id":"com.dingsheng.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"desktop":{"name":"shengtian","showName":"鼎盛","version":"5.1.5","id":"com.dingsheng.app.desktop","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","webUrl":"https://wap.dsziben.com","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","isHtml":false,"single":false,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}